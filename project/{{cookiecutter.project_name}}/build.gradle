def basePackage = '{{cookiecutter.package}}'

def cookiecutterFeatureRepo = 'https://github.com/tzatzosm/modular-monolith'

task addFeature {
    doLast {
        def featureName = project.hasProperty('featureName') ? project.property('featureName') : null
        if (!featureName) {
            throw new GradleException("You must provide -PfeatureName=<name> when running this task.")
        }
        exec {
            commandLine 'cookiecutter', cookiecutterFeatureRepo, '--directory=feature', '--no-input', \
                '--output-dir', 'features', "base_package=${basePackage}", "feature_name=${featureName}"
        }
    }
}
